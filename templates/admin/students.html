{% extends "admin/base.html" %}
{% load static %}
{% block content %}
<div class="main-content">
    <form method="get" action="{% url 'student_list' %}" class="search-form">
        <input type="text" name="query" placeholder="Search by name or ID number" value="{{ request.GET.query }}">
        <button type="submit">Search</button>
    </form>
    <div class="button-container">
        <a href="#" class="btn-add-student">Add Students</a>
        <a href="{% url 'student_list' %}?view_students=true" class="btn-view-students">View Students</a>
    </div>
    {% if students %}
    <table class="student-table">
        <thead>
            <tr>
                <th>ID Number</th>
                <th>Name</th>
                <th>Class</th>
                <th>Section</th>
                <th>Marks</th>
            </tr>
        </thead>
        <tbody>
            {% for student in students %}
            <tr>
                <td>{{ student.id_number }}</td>
                <td>{{ student.name }}</td>
                <td>{{ student.class }}</td>
                <td>{{ student.section }}</td>
                <td>{{ student.marks }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    <div class="pagination">
        <span class="step-links">
            {% if students.has_previous %}
                <a href="?page=1&view_students=true&query={{ request.GET.query }}">&laquo; first</a>
                <a href="?page={{ students.previous_page_number }}&view_students=true&query={{ request.GET.query }}">previous</a>
            {% endif %}
        </span>

        <span class="current">
            Page {{ students.number }} of {{ students.paginator.num_pages }}.
        </span>

        <span class="step-links">
            {% if students.has_next %}
                <a href="?page={{ students.next_page_number }}&view_students=true&query={{ request.GET.query }}">next</a>
                <a href="?page={{ students.paginator.num_pages }}&view_students=true&query={{ request.GET.query }}">last &raquo;</a>
            {% endif %}
        </span>
    </div>
    {% else %}
    <p>No student data available. Click "View Students" to fetch the data.</p>
    {% endif %}
</div>
   
<style>
    html, body {
     height: 100%;
     margin: 0;
     display: flex;
     justify-content: center;
     align-items: center;
     background-color: #f8f9fa; 
 }
 
 .main-content {
     padding: 20px;
     background-color: #fff;
     border-radius: 8px;
     box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
     max-width: 1000px;
     width: 100%;
     box-sizing: border-box;
     display: flex;
     flex-direction: column;
     align-items: center;
     margin-top: -15vh; 
 }
 
 .search-form {
     display: flex;
     width: 100%;
     max-width: 1000px; 
     margin-bottom: 20px;
 }
 
 .search-form input[type="text"] {
     flex: 1;
     padding: 10px;
     border: 1px solid #ccc;
     border-radius: 4px;
     margin-right: 10px;
 }
 
 .search-form button {
     padding: 10px 20px;
     border: none;
     background-color: #4d5868;
     color: #fff;
     border-radius: 4px;
     cursor: pointer;
 }
 
 .button-container {
     display: flex;
     gap: 10px;
     margin-top: 20px; 
     justify-content: center; 
 }
 
 .btn-add-student, .btn-view-students {
     padding: 10px 20px;
     background-color: #a72859;
     color: #fff;
     border: none;
     border-radius: 4px;
     text-decoration: none;
     text-align: center;
     cursor: pointer;
 }
 
 .student-table {
     width: 100%;
     border-collapse: collapse;
     margin-top: 20px;
 }
 
 .student-table th, .student-table td {
     border: 1px solid #ddd;
     padding: 8px;
     text-align: left;
 }
 
 .student-table th {
     background-color: #f2f2f2;
 }
 </style>
{% endblock %}